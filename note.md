1. åç¨‹çš„å¯åŠ¨æ–¹å¼æœ‰å“ªäº›ï¼Ÿ

   ```kotlin
   launch { }     // ä¸ä¼šè¿”å›ç»“æœï¼Œé€‚åˆæ‰§è¡Œä»»åŠ¡
   async { }      // è¿”å›Deferred<T>ï¼Œé€‚åˆå¹¶å‘è·å–ç»“æœ
   runBlocking { } // é˜»å¡å½“å‰çº¿ç¨‹ï¼Œé€šå¸¸ç”¨äºæµ‹è¯•æˆ–mainå‡½æ•°
   
   ```

2. Kotlin é«˜é˜¶å‡½æ•° å’Œ ä½œç”¨åŸŸå‡½æ•°æœ‰å“ªäº›ï¼ŸåŒºåˆ«ï¼Ÿ

	âœ… é«˜é˜¶å‡½æ•°ï¼šæ¥æ”¶å‡½æ•°ä½œä¸ºå‚æ•°æˆ–è¿”å›å‡½æ•°çš„å‡½æ•°

	å¸¸è§ï¼š`map`ã€`filter`ã€`run`ã€`with`ã€`let`ã€`apply`

	âœ… ä½œç”¨åŸŸå‡½æ•°ï¼š

| å‡½æ•°å  | è¿”å›å€¼     | this/it | é€‚ç”¨åœºæ™¯           |
| ------- | ---------- | ------- | ------------------ |
| `let`   | Lambdaç»“æœ | it      | é“¾å¼è°ƒç”¨ã€éç©ºå¤„ç† |
| `run`   | Lambdaç»“æœ | this    | åˆå§‹åŒ–ã€è¡¨è¾¾å¼     |
| `with`  | Lambdaç»“æœ | this    | å¤šæ¬¡è°ƒç”¨åŒä¸€å¯¹è±¡   |
| `apply` | å¯¹è±¡æœ¬èº«   | this    | åˆå§‹åŒ–å¯¹è±¡         |
| `also`  | å¯¹è±¡æœ¬èº«   | it      | è°ƒè¯•ã€æ—¥å¿—æ‰“å°     |

3. å¦‚ä½•åˆ›å»ºé™æ€å‡½æ•°ã€å˜é‡ï¼Ÿæ€ä¹ˆå†™å•ä¾‹ï¼Ÿ

   âœ… é™æ€æ–¹æ³•/å˜é‡ï¼š

   ```kotlin
   object Utils {
       fun log() {}
       val VERSION = "1.0"
   }
   ```

   æˆ–ä½¿ç”¨ `companion object {}` åˆ›å»ºç±»å†…éƒ¨é™æ€æˆå‘˜ã€‚

   

   âœ… å•ä¾‹ï¼š

   ```kotlin
   object MySingleton {
       fun doSomething() { }
   }
   ```

4. lateinit vs lazy çš„åŒºåˆ«ï¼Ÿ

   | ç‰¹æ€§         | `lateinit`               | `lazy`                    |
   | ------------ | ------------------------ | ------------------------- |
   | ç”¨äºç±»å‹     | `var`ï¼Œéç©ºå¼•ç”¨          | `val`ï¼Œä¸å¯å˜             |
   | é€‚ç”¨åœºæ™¯     | éœ€è¦å»¶ååˆå§‹åŒ–ï¼ˆå¦‚Viewï¼‰ | æƒ°æ€§åˆå§‹åŒ–ï¼ˆå¦‚é…ç½®/å•ä¾‹ï¼‰ |
   | æ˜¯å¦çº¿ç¨‹å®‰å…¨ | å¦                       | é»˜è®¤çº¿ç¨‹å®‰å…¨ï¼ˆå¯é…ç½®ï¼‰    |

5. ä»€ä¹ˆæ˜¯å†…è”å‡½æ•°ï¼Ÿ

   ä½¿ç”¨ `inline` ä¿®é¥°çš„å‡½æ•°ã€‚å°†å‡½æ•°ä½“ç¼–è¯‘æœŸé—´æ›¿æ¢åˆ°è°ƒç”¨å¤„ï¼Œ**å‡å°‘å‡½æ•°å¯¹è±¡åˆ›å»ºå’Œæ€§èƒ½å¼€é”€**ï¼Œå¸¸ç”¨äºé«˜é˜¶å‡½æ•°ã€‚

   ```kotlin
   inline fun doSomething(block: () -> Unit) {
       block()
   }
   ```

6. ç½‘ç»œè¯·æ±‚å¦‚ä½•å®ç°ï¼ŸRetrofit åŠ  Headerï¼Ÿæ‹¦æˆªå™¨ï¼Ÿ

   #### âœ… å®ç°æ–¹å¼ï¼š

   - Retrofit + OkHttp + åç¨‹ æˆ– RxJava

   âœ… æ¯ä¸ªè¯·æ±‚æ·»åŠ  Headerï¼š

   ```kotlin
   @GET("xxx")
   fun getData(@Header("token") token: String): Call<Response>
   ```

   æˆ–å…¨å±€æ·»åŠ ï¼š

   ```kotlin
   val client = OkHttpClient.Builder()
       .addInterceptor { chain ->
           val request = chain.request().newBuilder()
               .addHeader("token", "yourToken")
               .build()
           chain.proceed(request)
       }.build()
   ```

   #### âœ… æ‹¦æˆªå™¨ï¼š

   - **åº”ç”¨æ‹¦æˆªå™¨ï¼ˆaddInterceptorï¼‰**ï¼šä¸ä¼šå—ç¼“å­˜æ§åˆ¶å½±å“ï¼Œå¯åšæ—¥å¿—ã€ç»Ÿä¸€Headerå¤„ç†
   - **ç½‘ç»œæ‹¦æˆªå™¨ï¼ˆaddNetworkInterceptorï¼‰**ï¼šå¤„ç†è¯·æ±‚ä¸å“åº”çš„åŸå§‹æ•°æ®ï¼Œå¯ç”¨äºç¼“å­˜æ§åˆ¶

7. æ¨¡å—åŒ–å¼€å‘æ—¶ï¼Œæ¨¡å—å¦‚ä½•é€šä¿¡ï¼Ÿ

   æˆ‘ä»¬æ¨¡å—é—´æ•°æ®é€šä¿¡ä¸»è¦é€šè¿‡æ•°æ®åº“å’Œäº‹ä»¶æœºåˆ¶æ¥è§£è€¦ï¼Œæ¯”å¦‚ï¼š

   - æ•°æ®å±‚ç»Ÿä¸€ç®¡ç†ï¼Œæ¨¡å—å†™å…¥ Room åï¼Œé€šè¿‡ Flow æˆ– LiveData ä¼ é€’ç»™ UIï¼›
   - ä½¿ç”¨ Hilt æä¾›ä¾èµ–æ³¨å…¥ï¼Œæ–¹ä¾¿è·¨æ¨¡å—å¤ç”¨ï¼›
   - ä¸€äº›è·¨æ¨¡å—äº‹ä»¶ç”¨ EventBus æˆ–åç¨‹é€šé“æ¥å¤„ç†ã€‚

8. é¡¹ç›®æ¨¡å—åŒ–ç»“æ„ï¼Ÿä½ çš„è§’è‰²ï¼Ÿ

   é¡¹ç›®æŒ‰åŠŸèƒ½æ‹†åˆ†å¤šä¸ª moduleï¼Œæ¯”å¦‚ `login`ã€`home`ã€`network`ã€`common`ã€‚

   - å…¬å…±æ¨¡å—ï¼ˆå¦‚ç½‘ç»œåº“ã€æ•°æ®å­˜å‚¨ï¼‰ç”¨ Base æ¨¡å—éš”ç¦»ï¼›
   - ä½¿ç”¨ Gradle é…ç½®ä¾èµ–ï¼Œæå‡æ„å»ºæ•ˆç‡ï¼›
   - æˆ‘åœ¨é¡¹ç›®ä¸­ä¸»è¦è´Ÿè´£ã€æ¨¡å—A/Bã€‘çš„æ ¸å¿ƒåŠŸèƒ½å¼€å‘ï¼ŒåŒæ—¶ä¹Ÿå‚ä¸äº†åŸºç¡€æ¶æ„çš„æ­å»ºï¼ˆå¦‚ Hiltã€Retrofit å°è£…ç­‰ï¼‰ã€‚

9. kotlin å†·æµå’Œçƒ­æµçš„åŒºåˆ«ï¼Ÿ

   Kotlin ä¸­çš„**å†·æµï¼ˆCold Flowï¼‰\**å’Œ\**çƒ­æµï¼ˆHot Flowï¼‰\**æ˜¯ `Flow` çš„ä¸¤ç§æ ¸å¿ƒè¡Œä¸ºæ–¹å¼ï¼Œå®ƒä»¬çš„åŒºåˆ«ä¸»è¦ä½“ç°åœ¨\**æ•°æ®çš„ç”Ÿäº§æ—¶æœº**å’Œ**å¤šä¸ªè®¢é˜…è€…ä¹‹é—´çš„æ•°æ®å…±äº«**ã€‚

   ğŸ”¹ ä¸€å¥è¯æ€»ç»“

   | ç±»å‹ | è¡Œä¸ºç‰¹å¾                                 | ç¤ºä¾‹                      |
   | ---- | ---------------------------------------- | ------------------------- |
   | å†·æµ | æ¯æ¬¡æ”¶é›†æ—¶éƒ½é‡æ–°æ‰§è¡Œæ•°æ®ç”Ÿäº§é€»è¾‘         | `flow { ... }`            |
   | çƒ­æµ | æ•°æ®ä¸€ç›´åœ¨äº§ç”Ÿï¼Œæ”¶é›†è€…åªèƒ½æ¥æ”¶ä¹‹åçš„æ•°æ® | `SharedFlow`, `StateFlow` |

	ğŸ§Š å†·æµï¼ˆCold Flowï¼‰

		å†·æµæ˜¯æ‡’åŠ è½½çš„ï¼ˆ**å†·å¯åŠ¨**ï¼‰ï¼šåªæœ‰åœ¨æœ‰äººæ”¶é›†ï¼ˆ`collect`ï¼‰æ—¶ï¼Œæ‰å¼€å§‹æ‰§è¡Œæµçš„é€»è¾‘ã€‚

		æ¯ä¸ªæ”¶é›†è€…**éƒ½èƒ½ä»å¤´å¼€å§‹**æ¥æ”¶å®Œæ•´çš„æ•°æ®åºåˆ—ã€‚

		âœ… æ¯æ¬¡ collect éƒ½ä¼šè§¦å‘ä¸€æ¬¡ flow çš„æ‰§è¡Œé€»è¾‘ã€‚

	ğŸ”¥ çƒ­æµï¼ˆHot Flowï¼‰

		çƒ­æµåˆ™æ˜¯æ•°æ®**ä¸»åŠ¨æ¨é€**çš„ï¼Œä¸ä¾èµ– collect çš„è°ƒç”¨ï¼Œæ•°æ®æ˜¯æŒç»­å­˜åœ¨çš„ï¼Œä¸€æ—¦å‘é€æ•°æ®ï¼Œ**å½“å‰æ´»è·ƒçš„æ”¶é›†è€…**æ‰èƒ½æ¥æ”¶åˆ°ã€‚

		å¸¸è§çƒ­æµç±»å‹ï¼š

| ç±»å‹         | ç‰¹ç‚¹                                                    |
| ------------ | ------------------------------------------------------- |
| `StateFlow`  | ç±»ä¼¼äº LiveDataï¼Œæœ‰åˆå§‹å€¼ã€ä¿å­˜æœ€æ–°å€¼ï¼Œåªå‘ç»™æ´»è·ƒæ”¶é›†è€… |
| `SharedFlow` | ç±»ä¼¼äºå¹¿æ’­ï¼Œä¸ä¿ç•™å€¼ï¼Œå¯é…ç½®ç¼“å­˜å’Œé‡æ”¾ç­–ç•¥              |

	ğŸ†š å†·æµ vs çƒ­æµ åŒºåˆ«æ±‡æ€»è¡¨

| æ¯”è¾ƒé¡¹       | å†·æµï¼ˆCold Flowï¼‰        | çƒ­æµï¼ˆHot Flowï¼‰             |
| ------------ | ------------------------ | ---------------------------- |
| æ˜¯å¦æ‡’æ‰§è¡Œ   | æ˜¯ï¼ˆæŒ‰éœ€ï¼‰               | å¦ï¼ˆä¸»åŠ¨æ¨é€ï¼‰               |
| æ˜¯å¦å…±äº«æ•°æ® | å¦ï¼Œæ¯ä¸ªæ”¶é›†è€…ç‹¬ç«‹       | æ˜¯ï¼Œå¤šä¸ªæ”¶é›†è€…å…±äº«åŒä¸€ä¸ªæºå¤´ |
| æ•°æ®å‘å°„æ—¶æœº | æ”¶é›†æ—¶æ‰å‘å°„             | åˆ›å»ºåå°±å¯å‘å°„ï¼Œå’Œæ”¶é›†æ— å…³   |
| æ˜¯å¦ä¿ç•™æ•°æ® | å¦                       | `StateFlow` å¯ä¿ç•™æœ€æ–°æ•°æ®   |
| ç±»æ¯”         | Retrofit è¯·æ±‚ã€Room æŸ¥è¯¢ | LiveDataã€äº‹ä»¶æ€»çº¿           |

	âœ å®é™…å¼€å‘ä¸­æ€ä¹ˆç”¨ï¼Ÿ

	**å†·æµ**ï¼šç”¨äºä¸€æ¬¡æ€§è·å–æ•°æ®ï¼Œæ¯”å¦‚ç½‘ç»œè¯·æ±‚ã€æ•°æ®åº“æŸ¥è¯¢ï¼ˆç»“åˆ `flow {}` ä½¿ç”¨ï¼‰ã€‚

	**çƒ­æµ**ï¼šç”¨äºçŠ¶æ€å…±äº«ã€é€šçŸ¥ã€äº‹ä»¶æ€»çº¿ã€‚

- `StateFlow` â†’ æ›¿ä»£ `LiveData`ï¼›
- `SharedFlow` â†’ ç”¨äºäº‹ä»¶åˆ†å‘ï¼Œæ¯”å¦‚ toastã€å¯¼èˆªç­‰ã€‚

	å†™æ³•

	âœ… æ­£ç¡®å†™æ³•åˆ†æï¼ˆå†·æµï¼‰

```kotlin
viewModel.someFlow
.flowWithLifecycle(viewLifecycleOwner.lifecycle, Lifecycle.State.STARTED)
.onEach { value ->
    // å¤„ç†æ¯ä¸ªå€¼ï¼Œæ¯”å¦‚æ›´æ–° UI
}
.launchIn(viewLifecycleOwner.lifecycleScope)
```

	âœ… ä¼˜ç‚¹ï¼š

- `flowWithLifecycle` ä¼šæ ¹æ® Fragment çš„ç”Ÿå‘½å‘¨æœŸè‡ªåŠ¨æš‚åœ/æ¢å¤ collectï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚
- `onEach` å¯ä»¥é“¾å¼å¤„ç†æ¯ä¸ªå‘å°„çš„å€¼ã€‚
- `launchIn(scope)` ä¼šè‡ªåŠ¨å¯åŠ¨å†·æµã€‚

	ğŸ”¥ å†·æµå¯åŠ¨å…³é”®çŸ¥è¯†ç‚¹

	å†·æµæ˜¯ã€Œæƒ°æ€§ã€çš„ï¼Œå¿…é¡» `collect` æ‰ä¼šå¯åŠ¨ã€‚

	Kotlin Flow æœ‰å››ç§ç»ˆç»“æ“ä½œï¼ˆè¡¨ç¤ºâ€œå¯åŠ¨ collect çš„åŠ¨ä½œâ€ï¼‰ï¼š

| æ“ä½œç¬¦            | ç”¨é€”                                |
| ----------------- | ----------------------------------- |
| `collect`         | æœ€åŸºç¡€çš„æ”¶é›†                        |
| `collectLatest`   | æ”¶é›†æœ€æ–°å€¼ï¼ˆä¼šå–æ¶ˆæ—§çš„ï¼‰            |
| `launchIn(scope)` | å¯åŠ¨å†·æµåç¨‹ï¼Œé€‚åˆé“¾å¼ä½¿ç”¨          |
| `toList()`        | æŠŠ flow å˜æˆ listï¼Œå¸¸ç”¨äºä¸€æ¬¡æ€§æ”¶é›† |

```kotlin
viewModel.uiState
    .flowWithLifecycle(viewLifecycleOwner.lifecycle, Lifecycle.State.STARTED)
    .onEach { state ->
        // å¤„ç† UI æ›´æ–°
    }
    .launchIn(viewLifecycleOwner.lifecycleScope)

```